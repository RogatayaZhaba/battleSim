!function(e){var t={};function r(s){if(t[s])return t[s].exports;var o=t[s]={i:s,l:!1,exports:{}};return e[s].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(s,o,function(t){return e[t]}.bind(null,o));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t){function r({usurpers:{corvettes:e,destroyers:t,cruisers:r,battleships:s,titans:o},triumvirate:{corvettes:n,destroyers:i,cruisers:u,battleships:a,titans:c}}){return{usurpers:{corvettes:+e.querySelector("input").value,destroyers:+t.querySelector("input").value,cruisers:+r.querySelector("input").value,battleships:+s.querySelector("input").value,titans:+o.querySelector("input").value},triumvirate:{corvettes:+n.querySelector("input").value,destroyers:+i.querySelector("input").value,cruisers:+u.querySelector("input").value,battleships:+a.querySelector("input").value,titans:+c.querySelector("input").value}}}function s(e){return 60*e.corvettes+160*e.destroyers+360*e.cruisers+720*e.battleships+5400*e.titans}function o(e,t,r){const s={corvettes:0,destroyers:0,cruisers:0,battleships:0,titans:0},o=.5*r;return s.corvettes=e.corvettes*o>e.corvettes?Math.round(.85*e.corvettes):Math.round(e.corvettes*o),s.destroyers=e.destroyers*o>e.destroyers?Math.round(.85*e.destroyers):Math.round(e.destroyers*o),s.cruisers=e.cruisers*o>e.cruisers?Math.round(.85*e.cruisers):Math.round(e.cruisers*o),s.battleships=e.battleships*o>e.battleships?Math.round(.85*e.battleships):Math.round(e.battleships*o),s.titans=e.titans*o>e.titans?Math.round(.85*e.titans):Math.round(e.titans*o),s}window.onload=function(){console.log("loaded fine");const e=document.querySelector(".start-button"),t={usurpers:{corvettes:document.querySelector("#usurpers-option-container .ships-option[data-shipClass='corvette']"),destroyers:document.querySelector("#usurpers-option-container .ships-option[data-shipClass='destroyer']"),cruisers:document.querySelector("#usurpers-option-container .ships-option[data-shipClass='cruiser']"),battleships:document.querySelector("#usurpers-option-container .ships-option[data-shipClass='battleship']"),titans:document.querySelector("#usurpers-option-container .ships-option[data-shipClass='titan']")},triumvirate:{corvettes:document.querySelector("#triumvirate-option-container .ships-option[data-shipClass='corvette']"),destroyers:document.querySelector("#triumvirate-option-container .ships-option[data-shipClass='destroyer']"),cruisers:document.querySelector("#triumvirate-option-container .ships-option[data-shipClass='cruiser']"),battleships:document.querySelector("#triumvirate-option-container .ships-option[data-shipClass='battleship']"),titans:document.querySelector("#triumvirate-option-container .ships-option[data-shipClass='titan']")}},n=document.querySelectorAll(".ship-input input");let i=r(t);console.log(n),n.forEach(e=>{e.addEventListener("input",()=>{i=r(t),console.log(i)})}),e.addEventListener("click",()=>{!async function(e){const t=document.querySelector("#start-config"),r=document.querySelector("#battle-results"),n=document.querySelector(".loader"),i=document.querySelector(".results-info"),u=function(e){const t={winner:"",triumvirateResult:"",usurpersResult:""},r=s(e.usurpers),n=s(e.triumvirate),i=.2*Math.random()-.1,u=r+r*i-n;let a={corvettes:0,destroyers:0,cruisers:0,battleships:0,titans:0},c={corvettes:0,destroyers:0,cruisers:0,battleships:0,titans:0},l="",p="";if(u>0)t.winner="Узурпаторы выиграли сражение!",a=o(e.usurpers,!0,n/r),c=o(e.triumvirate,!1,r/n);else if(0===u){let s=Math.random();s>.5?(t.winner="Узурпаторы выиграли сражение!",a=o(e.usurpers,!0,n/r),c=o(e.triumvirate,!1,r/n)):(t.winner="Триумвират выиграл сражение!",a=o(e.usurpers,!1,n/r),c=o(e.triumvirate,!0,r/n))}else t.winner="Триумвират выиграл сражение!",a=o(e.usurpers,!1,n/r),c=o(e.triumvirate,!0,r/n);c.corvettes>0&&(l+=`${c.corvettes} корветов`);c.destroyers>0&&(l.length>0&&(l+=", "),l+=`${c.destroyers} эсминцев`);c.cruisers>0&&(l.length>0&&(l+=", "),l+=`${c.cruisers} крейсеров`);c.battleships>0&&(l.length>0&&(l+=", "),l+=`${c.battleships} линкоров`);c.titans>0&&(l.length>0&&(l+=" and "),l+=`${c.titans} дрэдноутов`);a.corvettes>0&&(p+=`${a.corvettes} корветов`);a.destroyers>0&&(p.length>0&&(p+=", "),p+=`${a.destroyers} эсминцев`);a.cruisers>0&&(p.length>0&&(p+=", "),p+=`${a.cruisers} крейсеров`);a.battleships>0&&(p.length>0&&(p+=", "),p+=`${a.battleships} линкоров`);a.titans>0&&(p.length>0&&(p+=" and "),p+=`${a.titans} дрэдноутов`);l.length>0&&(t.triumvirateResult=`Триумвират потерял: ${l}`);p.length>0&&(t.usurpersResult=`Узурпаторы потеряли: ${p}`);return console.log(t),t}(e),a=document.querySelector(".winner"),c=document.querySelector(".usurpers-result"),l=document.querySelector(".triumvirate-result");a.innerText=u.winner,c.innerText=u.usurpersResult,l.innerText=u.triumvirateResult,t.classList.toggle("hidden"),r.classList.toggle("hidden"),await function(e){return new Promise(t=>{let r=function(){const e=document.querySelector(".loading-text");let t=[];return["Поднимаем всех по тревоге...","Раздаём пинки младшим офицерам","Делаем предварительный пиф-паф","Жёсткое рубилово флотилий","Жёсткое рубилово продолжается","Небольшая передышка","...","Возобновляем рубилово","Расходимся","Считаем потери","Раздаём пинки младшим офицерам"].forEach((r,s)=>{let o=setTimeout(()=>{e.innerText=r},4500*s);t.push(o)}),t}(),s=setTimeout(()=>{[...r,s].forEach(e=>clearTimeout(e)),t()},e)})}(49500),n.classList.toggle("hidden"),i.classList.toggle("hidden")}(i)})}}]);